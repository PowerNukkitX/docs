# Paramètres du monde

PNX prend en charge le chargement des mondes depuis BDS. Il vous suffit de les placer dans le dossier `worlds` pour les charger. Après avoir chargé le monde, un fichier `config.json` sera généré pour contrôler certains paramètres liés au monde.

## Example
Voici un exemple de configuration utilisé pour démarrer le générateur de terrain Terra intégré dans PNX et utiliser son pack de configuration par défaut.
N'oubliez pas d'activer `use-terra=on` dans `server.properties` avant de l'utiliser.

```json showLineNumbers filename="config.json"
{
  "format": "leveldb",
  "enable": true,
  "generators": {
    "0": {
      "name": "terra",
      "seed": 0,
      "enableAntiXray": false,
      "antiXrayMode": "LOW",
      "preDeobfuscate": true,
      "dimensionData": {
        "dimensionName": "minecraft:overworld",
        "dimensionId": 0,
        "minHeight": -64,
        "maxHeight": 319,
        "height": 384,
        "chunkSectionCount": 24
      },
      "preset": {
        "pack": "overworld"
      }
    }
  }
}
```

## Éléments de configuration
Voici des explications sur certains éléments de configuration de l'exemple ci-dessus

### `DimensionData`: <a>object</a>
**OverWorld**
```json showLineNumbers filename="config.json"
{
    "dimensionName": "minecraft:overworld",
    "dimensionId": 0,
    "minHeight": -64,
    "maxHeight": 319,
    "height": 384,
    "chunkSectionCount": 24
}
```
**Nether**
```json showLineNumbers filename="config.json"
{
    "dimensionName": "minecraft:nether",
    "dimensionId": 1,
    "minHeight": 0,
    "maxHeight": 127,
    "height": 128,
    "chunkSectionCount": 8
}
```
**End**
```json showLineNumbers filename="config.json"
{
    "dimensionName": "minecraft:end",
    "dimensionId": 2,
    "minHeight": 0,
    "maxHeight": 255,
    "height": 256,
    "chunkSectionCount": 16
}
```

### `enable`: <a>boolean</a>
Valeurs: `true`/`false`

Contrôle si ce monde doit être chargé, par défaut c'est `true`

### `format`: <a>string</a>
Valeur: `leveldb`

Contrôle le chargeur pour le chargement du monde, actuellement il ne prend en charge que leveldb

### `generators`: <a>object</a>
Key: <a>DimensionId</a> Clé représentant l'ID de la dimension à charger [0,1,2]<br/>
Valeur: <a>Generator</a>

Contrôle les dimensions chargées pour ce monde

### `Generator`: <a>object</a>
- `name` Nom du générateur, utilisé pour contrôler le générateur de terrain utilisé par cette dimension, tel que `terra`, les valeurs spécifiques sont déterminées par les plugins et le core
- `seed` Graine utilisée pour la génération de nombres aléatoires
- `enableAntiXray` Activer l'anti-triche anti-Xray
- `antiXrayMode` Niveau de vérification anti-triche anti-Xray, efficace seulement lorsque `enableAntiXray` est activé (`LOW`, `MEDIUM`, `HIGH`)
- `preDeobfuscate` Désobscurcir les blocs à l'avance, ce qui peut optimiser l'expérience des joueurs normaux, efficace seulement lorsque `enableAntiXray` est activé (`true`, `false`)
- `dimensionData` [DimensionData](#dimensiondata-object)
- `preset` Un objet dont les valeurs sont passées au générateur, la façon de les utiliser doit être vérifiée dans la documentation correspondante du générateur

## Générateurs intégrés de PNX

### Flat
Un générateur plat, très similaire à celui de base.

### Terra
- Terra est un générateur [open-source](https://github.com/PolyhedralDev/Terra) que vous pouvez utiliser dans PNX pour générer des mondes épiques.
- Pour activer le générateur Terra, définissez `use-terra=on` dans `server.properties`.
- Terra contrôle la génération du terrain à l'aide de packs de configuration, et vous pouvez utiliser différents packs pour différentes expériences.
- Terra prend en charge le chargement de packs de configuration à partir de fichiers zip ou de dossiers. Pour installer un pack de configuration, placez-le simplement dans le dossier `./terra/packs` et redémarrez le serveur.
- Vous pouvez trouver certains packs de configuration disponibles ici : [Community Packs](https://terra.polydev.org/config/community-packs.html).


Ensuite, nous utiliserons le pack de configuration [ReimagEND](https://github.com/justaureus/ReimagEND) comme exemple pour décrire comment utiliser les packs de configuration.
Tout d'abord, créez un dossier de monde dans le répertoire des mondes, par exemple `end`, et créez le fichier de configuration suivant `config.json`.

```json showLineNumbers filename="config.json"
{
  "format": "leveldb",
  "enable": true,
  "generators": {
    "2": {
      "name": "terra",
      "seed": 0,
      "enableAntiXray": false,
      "antiXrayMode": "LOW",
      "preDeobfuscate": true,
      "dimensionData": {
        "dimensionName": "minecraft:end",
        "dimensionId": 2,
        "minHeight": 0,
        "maxHeight": 255,
        "height": 256,
        "chunkSectionCount": 16
      },
      "preset": {
        "pack": "REIMAGEND"
      }
    }
  }
}
```
Le `preset/pack` est le nom du pack de configuration, que vous pouvez trouver dans l'élément `id` du fichier `pack.yml` du pack de configuration.
Ensuite, redémarrez le serveur. Tapez `world tp end Dim2` pour vous téléporter vers le monde `end`.


## Pourquoi les paramètres ne prennent pas effet
- Si votre monde n'utilisait pas précédemment le générateur Terra, les paramètres ne prendront pas effet. Vous devez créer un nouveau monde.
- Veuillez vérifier si vous avez correctement configuré Terra, sinon les paramètres ne prendront pas effet.


## Utilisation excessive de la mémoire
Si vous souhaitez réduire l'utilisation de la mémoire, vous pouvez essayer de modifier `./terra/config/yml`：

```yaml showLineNumbers filename="config.yml"
cache:
  structure: 0 # default 32
  sampler: 0 # default 128
  biome-provider: 0 # default 32
```
Cela réduira l'utilisation de la mémoire mais augmentera la charge CPU.